<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Ayurvedic LLM Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    body { font-family: system-ui, sans-serif; margin: 24px; }
    .card { max-width: 800px; margin: auto; padding: 20px; border: 1px solid #eee; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
    textarea { width: 100%; height: 100px; padding: 10px; }
    button { padding: 10px 16px; margin-top: 8px; cursor:pointer; }
    pre { white-space: pre-wrap; word-break: break-word; background: #fafafa; padding: 10px; border-radius: 8px; }
    .row { display:flex; gap:10px; align-items:center; }
    input[type=number] { width: 120px; padding: 8px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Ayurvedic LLM Assistant (Demo)</h2>
    <div class="row">
      <label>User ID:</label>
      <input id="uid" type="number" value="1" min="1"/>
    </div>
    <p>Type your question:</p>
    <textarea id="q" placeholder="e.g., What should I do for acidity after late dinner?"></textarea>
    <br/>
    <button onclick="ask()">Ask</button>
    <h3>Answer</h3>
    <pre id="answer"></pre>
    <h3>Plan (JSON)</h3>
    <pre id="plan"></pre>
  </div>
<script>
async function ask(){
  const user_id = Number(document.getElementById('uid').value || 1);
  const question = document.getElementById('q').value;
  document.getElementById('answer').textContent = "Loading...";
  document.getElementById('plan').textContent = "";

  const res = await fetch('/ask', {
    method:'POST',
    headers: { 'Content-Type':'application/json' },
    body: JSON.stringify({ user_id, question })
  });
  if(!res.ok){
    const t = await res.text();
    document.getElementById('answer').textContent = "Error: " + t;
    return;
  }
  const data = await res.json();
  document.getElementById('answer').textContent = data.answer_text + "\n\nDisclaimer: " + data.disclaimer;
  document.getElementById('plan').textContent = JSON.stringify(data.plan, null, 2);
}
</script>
</body>
</html>
